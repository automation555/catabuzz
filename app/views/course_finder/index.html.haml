%h2 Search
%br/


-form_tag('', :method=>:get) do
= text_field_tag 'q', '', :size => 30, :class => "text"
= submit_tag 'Search', :name => nil, :class => "button"
-end

%br/

-total_results = @results.nil? ? 0 : @results.total_entries

-if(total_results > 0)
-total_results_text = "(#{total_results} courses found)" 
-else
-total_results_text = "(no courses found)"
-end

-unless @results.nil? or @results.size < 1

.section_search_results
  %table
    %tr.section_list_header
      %th.code{:scope => "col"} Code
      %th.section{:scope => "col"} Section
      %th.name{:scope => "col"} Name
      %th.days{:scope => "col"} Days
      %th.starts{:scope => "col"} Starts
      %th.ends{:scope => "col"} Ends
      %th.enrollment{:scope => "col"} Enrollment
      %th.instructor{:scope => "col"} Instructor
      %th.location{:scope => "col"} Location
    -even_row = true
    -for result in @results do
    -row_class = even_row ? "d0" : "d1"
    -enrollment_class = get_enrollment_cell_class(result.enrollment_current, result.enrollment_max)
    %tr{:class => [row_class, " csid_#{result.id}"]}
      %td=result.course_code
      %td=result.section
      %td=result.course_name
      %td=result.days
      %td=format_lecture_time(result.start_time)
      %td=format_lecture_time(result.end_time)
      %td{:class => enrollment_class}=format_enrollment(result.enrollment_current, result.enrollment_max)
      %td=result.instructor
      %td=result.location
    -even_row = !even_row
    -end
-end

%p.pages_list
  .pagination
    = will_paginate @results, :container => false, :prev_label => "Prev", :next_label => "&gt"
    %span.result_count=total_results_text
    
    
